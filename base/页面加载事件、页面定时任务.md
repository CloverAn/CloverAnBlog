## 页面加载事件、页面定时任务

页面打开自动执行事件，间隔一定时间再次执行对应的方法。



1、需要引入jQuery

可以下载文件后导入项目

```
http://jquery.com/download/
```

也可以使用以下在线CDN数据:

百度CDN：

```javascript
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
```

新浪CDN：

```javascript
<script src="https://lib.sinaapp.com/js/jquery/2.0.2/jquery-2.0.2.min.js"></script>
```



2、页面加载事件（页面加载时自动自行）

```javascript
<script>
   $(function () {
     //需要执行的方法体
    });
</script>
```



3、定时执行任务

```
 //数据统计
    function getCount() {
        // 1000 = 1s   24h = 86400 s
        setTimeout(getCount, 1000 * 86400);
        $.ajax({
        //更多参数可参考：https://www.w3school.com.cn/jquery/ajax_ajax.asp
            url: "/statistic/count", 
            success: function (res) {
                if (res.code == 200) {
                    alert(1);
                } else {
                    clearTimeout();//如果出现问题，则清除定时任务。
                    alert(2);
                }
            }
        });
    }
```



4、使用

​	可以在第2步的页面加载事件中，调用第3步的方法。

​	这样，在页面打开的时候，会自动执行一次第3步的方法。在页面不关闭的情况下，经过指定的间隔时长之后，会再次执行第三步的方法。